# Структура навигационного сообщения GPS L5 CNAV

## 1. Обзор

Сигнал GPS L5, передаваемый на частоте 1176.45 МГц, является одним из ключевых компонентов модернизации GPS. Он предназначен для служб, требующих высокой точности и целостности (Safety-of-Life). Сигнал L5 передает навигационное сообщение CNAV, аналогичное по структуре сообщению на L2C, но с более высокой скоростью передачи данных.

## 2. Характеристики сигнала

- **Частота**: 1176.45 МГц
- **Компоненты**:
  - **I5 (In-phase)**: Информационный канал, содержит навигационные данные.
  - **Q5 (Quadrature)**: Пилотный канал, не содержит данных, используется для более надежного захвата и сопровождения сигнала.
- **Модуляция**: QPSK (квадратурная фазовая манипуляция).
- **Дальномерный код**: Длина 10230 чипов, период 10 мс.
- **Скорость передачи данных**: 100 бит/с (50 символов/с с FEC 1/2).
- **FEC (Прямое исправление ошибок)**: Сверточное кодирование, скорость 1/2, K=7.

## 3. Структура сообщения CNAV

Структура сообщения идентична L2C CNAV, но передается в 2 раза быстрее.

- **Длина сообщения**: 300 бит
- **Длительность передачи**: 6 секунд
- **Компоненты сообщения**:
  - **Преамбула**: 8 бит (фиксированная последовательность `10001011b`)
  - **PRN ID**: 6 бит (номер спутника)
  - **ID типа сообщения**: 6 бит
  - **TOW (Время недели)**: 17 бит (время передачи начала следующего сообщения, LSB = 6 секунд)
  - **Флаг тревоги**: 1 бит
  - **Поле данных**: 238 бит (содержимое зависит от типа сообщения)
  - **CRC (Контрольная сумма)**: 24 бита

### Полином CRC-24

Для проверки целостности сообщения используется тот же по��ином, что и в L2C:
`G(x) = x^24 + x^23 + x^22 + x^17 + x^16 + x^15 + x^14 + x^12 + x^11 + x^10 + x^8 + x^7 + x^6 + x^4 + x^2 + 1`

## 4. Основные типы сообщений

Сообщения L5 CNAV имеют ту же нумерацию и назначение, что и L2C CNAV. Наиболее важными для навигации являются:

- **Тип 10 и 11**: Эфемериды спутника.
- **Тип 30**: Параметры часов, ионосферная модель и групповые задержки (TGD, ISC).
- **Другие типы (31-37)**: Альманах, параметры UTC, параметры вращения Земли (EOP) и т.д.

### Тип сообщения 10: Эфемериды (часть 1)

| Биты      | Параметр | # Бит | Описание                         | Масштаб      | Единицы       |
|-----------|----------|-------|----------------------------------|--------------|---------------|
| 39-51     | WN       | 13    | Номер недели                     | 1            | недели        |
| 52-62     | t_oe     | 11    | Референсное время эфемерид       | 300          | с             |
| 63-94     | M_0      | 32    | Средняя аномалия                 | 2⁻³¹         | полукруги     |
| 95-126    | e        | 32    | Эксцентриситет                   | 2⁻³³         | (безразм.)    |
| 127-158   | sqrt(A)  | 32    | Кв. корень большой полуоси       | 2⁻¹⁹         | м¹/²          |

### Тип сообщения 11: Эфемериды (часть 2)

| Биты      | Параметр | # Бит | Описание                         | Масштаб      | Единицы       |
|-----------|----------|-------|----------------------------------|--------------|---------------|
| 39-49     | t_oe     | 11    | Референсное время эфемерид (совп.)| 300          | с             |
| 50-81     | Ω_0      | 32    | Долгота восходящего узла         | 2⁻³¹         | полукруги     |
| 82-113    | i_0      | 32    | Угол наклонения в t_oe           | 2⁻³¹         | полукруги     |
| 114-145   | ω        | 32    | Аргумент перигея                 | 2⁻³¹         | полукруги     |
| 146-169   | Ω_dot    | 24    | Скорость прямого восхождения     | 2⁻⁴³         | полукруги/с   |
| 170-183   | i_dot    | 14    | Скорость изменения наклонения    | 2⁻⁴³         | полукруги/с   |
| 184-199   | Δn       | 16    | Коррекция среднего движения      | 2⁻⁴³         | полукруги/с   |

### Тип сообщения 30: Часы, TGD и Ионосфера

| Биты      | Параметр | # Бит | Описание                         | Масштаб      | Единицы       |
|-----------|----------|-------|----------------------------------|--------------|---------------|
| 39-49     | t_oc     | 11    | Референсное время данных часов   | 300          | с             |
| 50-75     | a_f0     | 26    | Смещение часов                   | 2⁻³⁴         | с             |
| 76-95     | a_f1     | 20    | Дрейф часов                      | 2⁻⁴⁶         | с/с           |
| 96-105    | a_f2     | 10    | Ускорение дрейфа часов           | 2⁻⁵⁹         | с/с²          |
| 106-115   | T_GD     | 10    | Групповая задержка L1-L2         | 2⁻³²         | с             |
| 116-125   | ISC_L5I5 | 10    | Межсигнальная поправка L5 I5     | 2⁻³²         | с             |
| 126-135   | ISC_L5Q5 | 10    | Межсигнальная поправка L5 Q5     | 2⁻³²         | с             |
| 136-199   | Ионосфера| 64    | Параметры модели Клобучара (α, β)| -            | -             |
