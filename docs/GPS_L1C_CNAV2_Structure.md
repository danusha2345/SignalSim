# Структура навигационного сообщения GPS L1C (CNAV-2)

## 1. Обзор

Сигнал GPS L1C, передаваемый на частоте 1575.42 МГц, является вторым гражданским сигналом GPS. Он разработан для обеспечения повышенной производительности и совместимости с другими GNSS, в частности с Galileo E1. Сообщение, передаваемое в L1C, называется **CNAV-2**.

## 2. Характеристики сигнала

- **Частота**: 1575.42 МГц
- **Компоненты**:
  - **L1C_D (Data)**: Информационный канал (25% мощности).
  - **L1C_P (Pilot)**: Пилотный канал без данных (75% мощности).
- **Модуляция**: TMBOC (Time-Multiplexed Binary Offset Carrier), что обеспечивает совместимость с существующими приемниками L1 C/A и улучшенную производительность для новых.
- **Скорость передачи данных**: 100 бит/с.
- **Коды**: Длина 10230 чипов, период 10 мс.

## 3. Структура кадра CNAV-2

Структура кадра CNAV-2 кардинально отличается от LNAV и CNAV. Она не использует концепцию "слов" и "подкадров" в том же виде.

- **Длина кадра**: 1800 бит
- **Длительность передачи**: 18 секунд

Каждый кадр состоит из трех подкадров (Subframes):

---
### **Подкадр 1: Time of Interval (TOI)**

- **Длина**: 52 бита
- **Содержимое**:
  - **TOI**: 9 бит, время начала следующего подкадра (Subframe 2).
  - **Резерв**: 2 бита.
  - **CRC**: 6 бит.
  - **Хвост**: 6 бит.
- **FEC**: Кодируется кодом Боуза-Чоудхури-Хоквингема **BCH(51, 11)**.

---
### **Подкадр 2: Эфемериды и Часы**

- **Длина**: 600 бит (до FEC)
- **Ключевая особенность**: Этот подкадр передается **в каждом 18-секундном кадре** и содержит **полный набор эфемерид и параметров часов**. Это позволяет приемнику вычислить координаты гораздо быстрее, чем при пр��еме старых сигналов.
- **Содержимое**:
  - **Время**: WN, toe, toc.
  - **Параметры орбиты**: M₀, e, √A, Ω₀, i₀, ω.
  - **Поправки**: Δn, Ω̇, i̇, и все 6 гармонических поправок (Cuc, Cus, Crc, Crs, Cic, Cis).
  - **Параметры часов**: a_f0, a_f1, a_f2.
  - **Задержки**: T_GD, ISC.
  - **Статус**: URA, здоровье спутника.
- **FEC**: К 576 битам данных добавляется 24-битный CRC, после чего 600 бит кодируются кодом **LDPC (1200, 600)**.

---
### **Подкадр 3: Переменные данные**

- **Длина**: 274 бита (до FEC)
- **Содержимое**: Этот подкадр передает системную информацию в виде "страниц". Тип страницы меняется от кадра к кадру.
- **Типы страниц**:
  - **Страница 0**: Ионосферная модель и параметры UTC.
  - **Страницы 1-6**: MIDI-альманах (сокращенный альманах для 6 спутников).
  - **Страница 7**: Альманах пониженной точности.
  - **Страница 9**: Смещение времени GPS/GNSS (GGTO).
  - **Страница 10**: Параметры вращения Земли (EOP).
  - **Другие**: Текстовые сообщения, дифференциальные поправки и т.д.
- **FEC**: К 250 битам данных добавляется 24-битный CRC, после чего 274 бита кодируются кодом **LDPC (548, 274)**.

## 4. Сравнение с CNAV (L2/L5)

| Характеристика | CNAV (L2/L5) | CNAV-2 (L1C) |
|---|---|---|
| **Длина сообщения** | 300 бит | 1800 бит |
| **Время передачи** | 12с (L2C) / 6с (L5) | 18 секунд |
| **Передача эфемерид**| В типах сообщений 10 и 11 | В каждом кадре (Подкадр 2) |
| **Время до первого TTFF**| ~30-48 секунд | 18 секунд |
| **FEC** | Сверточный код (1/2) | LDPC + BCH |
| **Структура** | Гибкие типы сообщений | Жесткая структура с 3 подкадрами |
