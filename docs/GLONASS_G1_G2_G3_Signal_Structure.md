# Структура навигационных сигналов ГЛОНАСС G1, G2, G3

## Обзор

Глобальная навигационная спутниковая система (ГЛОНАСС) использует уникальный подход к передаче сигналов. Исторически система использовала **частотное разделение каналов (FDMA)** для своих основных сигналов в диапазонах G1 и G2. Современные спутники "Глонасс-К" внедряют новые сигналы с **кодовым разделением (CDMA)**, в частности, в диапазоне G3, что делает систему более совместимой с другими GNSS, такими как GPS и Galileo.

Этот документ описывает структуру как традиционных FDMA, так и современных CDMA сигналов, с особым акцентом на детальном формировании сообщения FDMA.

---

## 1. Сигналы с частотным разделением (FDMA) - G1 и G2

Эти сигналы передаются всеми поколениями спутников ГЛОНАСС.

### 1.1. Частотный план

- **Диапазон G1 (L1OF):** `f_k1 = 1602 МГц + k * 0.5625 МГц`
- **Диапазон G2 (L2OF):** `f_k2 = 1246 МГц + k * 0.4375 МГц`
  Где `k` - номер литерной частоты спутника (от -7 до +6).

### 1.2. Структура навигационного сообщения FDMA

Навигационное сообщение имеет иерархическую структуру:
- **Суперкадр**: 2.5 минуты (5 кадров)
- **Кадр**: 30 секунд (15 строк)
- **Строка**: 2 секунды (100 бит)

Каждая 2-секундная строка состоит из:
- **Временная метка**: Начало строки, укороченная ПСП-последовательность.
- **Информационные биты**: 85 бит данных.
- **Контрольная сумма**: 8 бит, вычисленные по коду Хэмминга для 85 информационных бит.
- **Кодирование**: Биты передаются со скоростью 50 бит/с с использованием манчестерского кодирования.

### 1.3. Детальная структура навигационных строк (85 бит данных)

Ниже приведено подробное описание содержимого каждой из 15 строк кадра. Биты нумеруются от 1 (MSB) до 85 (LSB).

---
#### **Строка 1: Эфемериды (часть 1)**
Содержит время и первую часть параметров движения спутника.

| Биты | Параметр | Кол-во бит | Описание и масштаб |
|---|---|---|---|
| 1-4 | `m` | 4 | Номер строки (всегда 1) |
| 5-6 | `P1` | 2 | Флаги режима работы |
| 7 | `ln` | 1 | Признак достоверности эфемерид |
| 8-19 | `tk` | 12 | Время кадра внутри текущих суток (LSB = 30 сек) |
| 20-22 | `x_n` | 3 | Старшие 3 б��та координаты X |
| 23-46 | `x_n_dot` | 24 | Скорость по оси X (LSB = 2⁻²⁰ км/с) |
| 47-51 | `x_n_ddot` | 5 | Ускорение по оси X (LSB = 2⁻³⁰ км/с²) |
| 52-54 | `y_n` | 3 | Старшие 3 бита координаты Y |
| 55-78 | `y_n_dot` | 24 | Скорость по оси Y (LSB = 2⁻²⁰ км/с) |
| 79-83 | `y_n_ddot` | 5 | Ускорение по оси Y (LSB = 2⁻³⁰ км/с²) |
| 84-85 | `B_n` | 2 | Признак недостоверности данных |

---
#### **Строка 2: Эфемериды (часть 2)**

| Биты | Параметр | Кол-во бит | Описание и масштаб |
|---|---|---|---|
| 1-4 | `m` | 4 | Номер строки (всегда 2) |
| 5-28 | `x_n` | 24 | Младшие 24 бита координаты X (LSB = 2⁻¹¹ км) |
| 29-52 | `y_n` | 24 | Младшие 24 бита координаты Y (LSB = 2⁻¹¹ км) |
| 53-76 | `z_n` | 24 | Полная координата Z (LSB = 2⁻¹¹ км) |
| 77-81 | `P2` | 5 | Флаги, в т.ч. признак работы на ВТ-коде |
| 82-85 | Резерв | 4 | Зарезервировано |

---
#### **Строка 3: Эфемериды (часть 3)**

| Биты | Параметр | Кол-во бит | Описание и масштаб |
|---|---|---|---|
| 1-4 | `m` | 4 | Номер строки (всегда 3) |
| 5 | `P3` | 1 | Флаг, указывающий на количество спутников в альманахе |
| 6-29 | `z_n_dot` | 24 | Скорость по оси Z (LSB = 2⁻²⁰ км/с) |
| 30-34 | `z_n_ddot` | 5 | Ускорение по оси Z (LSB = 2⁻³⁰ км/с²) |
| 35-56 | `τ_n` | 22 | Смещение шкалы времени спутника `t_n` от системной (LSB = 2⁻³⁰ с) |
| 57-61 | `Δτ_n` | 5 | Смещение времени для L2 относительно L1 (LSB = 2⁻³⁰ с) |
| 62-66 | `E_n` | 5 | Возраст оперативной информации (в днях) |
| 67-78 | Резерв | 12 | Зарезервировано |
| 79-81 | `P4` | 3 | Флаги |
| 82-85 | `N_T` | 4 | Номер текущего кадра в суперкадре (1-5) |

---
#### **Строка 4: Эфемериды и часы (часть 4)**

| Биты | Параметр | Кол-во бит | Описание и масштаб |
|---|---|---|---|
| 1-4 | `m` | 4 | Номер строки (всегда 4) |
| 5-15 | `γ_n` | 11 | Относительное отклонение несущей частоты (LSB = 2⁻⁴⁰) |
| 16-17 | `M` | 2 | Тип спутника |
| 18-22 | Резерв | 5 | Зарезервировано |
| 23-24 | `ln` | 2 | Признак достоверности для строк 1-2 и 3-4 |
| 25-46 | `τ_c` | 22 | Смещение системной шкалы ГЛОНАСС от UTC(SU) (LSB = 2⁻³⁰ с) |
| 47-51 | `N_4` | 5 | Номер четырехлетнего периода |
| 52-73 | `τ_GPS` | 22 | Смещение шкалы GPS от шкалы ГЛОНАСС (LSB = 2⁻³⁰ с) |
| 74-78 | `ln` | 5 | Признак достоверности альманаха |
| 79-85 | Резерв | 7 | Зарезервировано |

---
#### **Строка 5: Альманах (часть 1)**
Содержит параметры UTC и альманах для спутника с номером `(N_T - 1) * 5 + 1`.

| Биты | Параметр | Кол-во бит | Описание и масштаб |
|---|---|---|---|
| 1-4 | `m` | 4 | Номер строки (всегда 5) |
| 5 | `C_n` | 1 | Признак режима работы спутника |
| 6-10 | `n_A` | 5 | Номер спутника, для которого передается альманах |
| 11-32 | `τ_c` | 22 | Повтор `τ_c` из строки 4 |
| 33-85 | Альманах | 53 | Данные альманаха для первого спутника в этом кадре |

---
#### **Строки 6-15: Альманах (часть 2)**
Каждая пара строк (6-7, 8-9, 10-11, 12-13, 14-15) содержит полный альманах для одного спутника.

- **Строки 6, 8, 10, 12, 14 (четные):** Содержат первую половину альманаха для спутников `(N_T-1)*5 + 2` ... `(N_T-1)*5 + 5` и `N_T*5`.
- **Строки 7, 9, 11, 13, 15 (нечетные):** Содержат вторую половину альманаха для тех же спутников.

**Содержимое альманаха на один спутник (2 строки):**
- `n_A`: Номер спутника
- `C_n`: Признак исправности
- `H_n_A`: Номер литерной частоты
- `λ_n_A`: Долгота восходящего узла
- `t_λ_n_A`: Время прохождения узла
- `Δi_n_A`: Поправка к наклонению
- `ω_n_A`: Аргумент перигея
- `e_n_A`: Эксцентриситет
- `T_n_A`: Период обращения
- `τ_n_A`: Смещение часов спутника

---
## 2. Сигнал с кодовым разделением (CDMA) - G3 (L3OC)

Этот сигнал передается спутниками "Глонасс-К".

### 2.1. Характеристики сигнала

- **Центральная частота**: 1202.025 МГц
- **Модуляция**: BPSK(10) для пилотной компоненты, QPSK(10) для информационной.
- **Скорость передачи данных**: 100 бит/с

### 2.2. Структура навигационного сообщения CDMA

Структура сообщения L3OC основана на страницах, аналогично GPS/Galileo.
- **Суперкадр**: 120 секунд (4 кадра)
- **Кадр**: 30 секунд (10 подкадров)
- **Подкадр**: 3 секунды (300 бит)
  - Включает 8-битную преамбулу, ID сообщения, 252 бита данных и 24-битный CRC.

### 2.3. Типы сообщений (страниц)
- **Страница 1-2**: Эфемериды (`M0`, `e`, `sqrt(A)`, `Ω0`, `i0`, `ω` и т.д.).
- **Страница 3**: Гармонические поправки и параметры часов (`af0`, `af1`, `af2`).
- **Страница 4**: Альманах для одного спутника.
- **Страница 5**: Параметры связи с UTC и статус систем��.

### 2.4. Прямое исправление ошибок (FEC) и CRC
- **Код**: LDPC (Low-Density Parity-Check) со скоростью 1/2.
- **CRC**: 24-битный.

---
## 3. Сравнение FDMA и CDMA сигналов

| Параметр | FDMA (G1/G2) | CDMA (G3) |
|---|---|---|
| **Метод разделения** | Частотный (FDMA) | Кодовый (CDMA) |
| **Скорость данных** | 50 бит/с | 100 бит/с |
| **Структура сообщ.** | Строки/Кадры | Страницы/Подкадры |
| **FEC** | Код Хэмминга | LDPC |
| **Обнаружение ошибок** | Контрольная сумма (8 бит) | CRC-24 |
| **Совместимость** | Уникальная для ГЛОНАСС | Схожа с GPS/Galileo |
| **Компоненты** | Только информационная | Информационная + Пилотная |
